"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[873],{1873:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r,o,i,c,s,a=n(7568),u=n(603),l=n(655),f=n(5893),h=n(7294),d=n(3321),p=n(8989),m=n(4981);n(4007),n(9899),n(4203);var g=n(2222),y=void 0;sqlite3InitModule({print:console.log,printErr:console.error}).then(function(e){y=e});var v=(r=(0,a.Z)(function(e,t){var n,r,o,i;return(0,l.__generator)(this,function(c){switch(c.label){case 0:return console.log(e),[4,x()];case 1:return n=new(c.sent()).oo1.DB("/data.db","cw"),r=function(){try{e.split("\n").forEach(function(e){if(!e.startsWith("--")){var r=e.split(/\s/).slice(0,1)[0].toLowerCase();if("create"==r){n.exec(e);var o="created Table successfully";console.log(void 0===o?"undefined":(0,g.Z)(o)),t(o)}else if("insert"==r)n.exec(e),t("Inserted Data Successfully");else if("select"==r){var i=[],c=[];n.exec({sql:e,rowMode:"object",resultRows:i,columnNames:c}),c.join("");var s="";i.forEach(function(e){void 0===e.id&&(e.id=""),s+="<span>".concat(e.id," ").concat(e.name," ").concat(e.age,"</span> <br>")}),t(s)}else"delete"==r&&n.exec(e)}})}catch(e){alert(e.message.split(":"))}},-1!=(o=e.split("\n")[0]).search("DATA")&&o.startsWith("--")?(i=o.split(":")[1].trim(),w("./".concat(i),{headers:{"Content-Type":"text/plain"},method:"GET"}).then(function(e){return e.text()}).then(function(e){e.split("\n").forEach(function(e){if(""!==(e=e.trim()))try{n.exec(e)}catch(e){console.log(e.message)}})}).then(function(){r()}).catch(function(e){return alert("Unable to load data file: "+e.message)})):r(),[2]}})}),function(e,t){return r.apply(this,arguments)}),w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e3;return Promise.race([fetch(e,t),new Promise(function(e,t){return setTimeout(function(){return t(Error("timeout"))},n)})])},x=(o=(0,a.Z)(function(){return(0,l.__generator)(this,function(e){switch(e.label){case 0:if(y)return[2,y];return[4,new Promise(function(e){return setTimeout(e,5e3)}).then(function(){if(!y)throw Error("Sqlite didnt initialize.. reload your browser and try");return y})];case 1:return e.sent(),[2]}})}),function(){return o.apply(this,arguments)}),_="",b=["Python initialization complete",'File "/',"CodeRunner","mod = compile","self.ast"],E=(i=(0,a.Z)(function(e){var t;return(0,l.__generator)(this,function(n){switch(n.label){case 0:return""!=_&&(_=""),t=function(t){return P(t,e)},[4,loadPyodide({stdout:t})];case 1:return[2,n.sent()]}})}),function(e){return i.apply(this,arguments)}),Z=(c=(0,a.Z)(function(e,t){var n,r;return(0,l.__generator)(this,function(o){switch(o.label){case 0:return[4,E(t)];case 1:n=o.sent(),o.label=2;case 2:return o.trys.push([2,5,,6]),[4,n.loadPackagesFromImports(e)];case 3:return r=o.sent(),[4,n.runPythonAsync(e)];case 4:return console.log(r=o.sent()),r?j(r,t):""!==_?j(r,t):t(""),[3,6];case 5:return P(o.sent().message,t),[3,6];case 6:return[2]}})}),function(e,t){return c.apply(this,arguments)});function P(e,t){e.split("\n").forEach(function(e){b.some(function(t){return e.includes(t)})||j(e,t)})}function j(e,t){e&&t(_+=e+"\n")}var C=(s=(0,a.Z)(function(e,t,n,r){return(0,l.__generator)(this,function(o){return Z(e,t,n,r),[2]})}),function(e,t,n,r){return s.apply(this,arguments)}),I=n(5935);function k(e){var t,n=e.dataChage,r=e.value,o=e.language,i=e.editable,c=e.input,s=(0,u.Z)((0,h.useState)(""),2),g=s[0],y=s[1],w=(t=(0,a.Z)(function(e,t){return(0,l.__generator)(this,function(n){return y("Running..."),"python"===t&&(c&&""==document.getElementById("txt_ID").value?(document.getElementById("txt_ID").focus(),y("")):C(e,y)),"sql"===t&&(console.log("sql"),v(e,y)),[2]})}),function(e,n){return t.apply(this,arguments)});return console.log(g),(0,f.jsxs)("div",{className:"editor-container",children:[(0,f.jsx)(d.Z,{variant:"outlined",endIcon:(0,f.jsx)(p.Z,{}),className:"execute-button",onClick:function(){return w(r,o)},children:"Run"}),(0,f.jsx)(m.ZP,{mode:o,highlightActiveLine:!1,id:1,theme:"theme",value:r,maxLines:50,showGutter:!1,fontSize:14,editorProps:{$blockScrolling:!1},onChange:n,width:"100%",readOnly:i}),g&&(0,f.jsx)("code",{className:"resultTextareaStyle w-100",readOnly:!0,children:"python"===o?(0,f.jsx)("pre",{children:g}):(0,I.ZP)(g)})]})}}}]);